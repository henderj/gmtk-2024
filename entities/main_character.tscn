[gd_scene load_steps=11 format=3 uid="uid://b2kqamoul11gc"]

[ext_resource type="Script" path="res://scenes/gameplay/player_movement.gd" id="1_jbq02"]
[ext_resource type="Script" path="res://entities/main_character_sprites.gd" id="2_7f84s"]
[ext_resource type="Texture2D" uid="uid://d2etycu8w83ii" path="res://assets/sprites/FireflySpriteNoAnim.png" id="2_k71al"]
[ext_resource type="PackedScene" uid="uid://c11eaq4y8s30c" path="res://entities/bullets/shooter.tscn" id="3_4837i"]
[ext_resource type="Script" path="res://components/health_component.gd" id="5_7q07f"]
[ext_resource type="PackedScene" uid="uid://dkcxj6ggac5c0" path="res://entities/bullets/bullet_types/player_bullet.tscn" id="5_t0je0"]
[ext_resource type="Script" path="res://components/hitbox_component.gd" id="6_tv6aq"]
[ext_resource type="AudioStream" uid="uid://bpn1dfs4o0ng6" path="res://assets/sounds/spaceEngineLarge_001.ogg" id="7_t3td0"]
[ext_resource type="Script" path="res://entities/player_movement_sfx.gd" id="8_ae5x7"]

[sub_resource type="CapsuleShape2D" id="CapsuleShape2D_6uw6x"]
radius = 17.0292
height = 48.2848

[node name="MainCharacter" type="CharacterBody2D"]
collision_mask = 12
script = ExtResource("1_jbq02")
movementSpeed = 600

[node name="Sprites" type="Node2D" parent="."]
scale = Vector2(0.2, 0.2)
script = ExtResource("2_7f84s")
max_head_tilt = -45.0
min_head_tilt = 40.0
invincibility_color = Color(0.22, 0.22, 0.22, 1)

[node name="LegLeft" type="Sprite2D" parent="Sprites"]
position = Vector2(-71, 103)
texture = ExtResource("2_k71al")
region_enabled = true
region_rect = Rect2(116, 451, 119, 113)

[node name="LegRight" type="Sprite2D" parent="Sprites"]
position = Vector2(20, 120)
texture = ExtResource("2_k71al")
region_enabled = true
region_rect = Rect2(251, 439, 63, 126)

[node name="ArmOrigin" type="Node2D" parent="Sprites"]
position = Vector2(0, -15)

[node name="Arm" type="Sprite2D" parent="Sprites/ArmOrigin"]
position = Vector2(190, -27)
rotation = 0.335123
texture = ExtResource("2_k71al")
region_enabled = true
region_rect = Rect2(656, 553, 299, 165)

[node name="Shooter" parent="Sprites/ArmOrigin/Arm" instance=ExtResource("3_4837i")]
position = Vector2(40.171, 24.1307)
rotation = -0.335103
bullet_scene = ExtResource("5_t0je0")

[node name="Timer" type="Timer" parent="Sprites/ArmOrigin/Arm"]
wait_time = 0.2
autostart = true

[node name="Body" type="Sprite2D" parent="Sprites"]
texture = ExtResource("2_k71al")
region_enabled = true
region_rect = Rect2(386, 463, 179, 184)

[node name="Wings" type="Sprite2D" parent="Sprites"]
position = Vector2(-164, -40)
texture = ExtResource("2_k71al")
region_enabled = true
region_rect = Rect2(10, 615, 349, 281)

[node name="HeadOrigin" type="Node2D" parent="Sprites"]
position = Vector2(5, -50)

[node name="Head" type="Sprite2D" parent="Sprites/HeadOrigin"]
position = Vector2(-35, -85)
texture = ExtResource("2_k71al")
region_enabled = true
region_rect = Rect2(118, 61, 281, 315)

[node name="CollisionShape2D" type="CollisionShape2D" parent="."]
visible = false
position = Vector2(1, -9)
rotation = 0.0637561
shape = SubResource("CapsuleShape2D_6uw6x")

[node name="HealthComponent" type="Node2D" parent="."]
script = ExtResource("5_7q07f")
remove_on_died = true
bar_color = Color(0.839216, 0.8, 0.184314, 1)

[node name="HitboxComponent" type="Area2D" parent="." node_paths=PackedStringArray("health_component")]
collision_mask = 12
script = ExtResource("6_tv6aq")
health_component = NodePath("../HealthComponent")

[node name="CollisionShape2D" type="CollisionShape2D" parent="HitboxComponent"]
visible = false
position = Vector2(1, -9.00001)
rotation = 0.127512
shape = SubResource("CapsuleShape2D_6uw6x")

[node name="MovementSFX" type="AudioStreamPlayer2D" parent="."]
stream = ExtResource("7_t3td0")
volume_db = -4.0
autoplay = true
bus = &"SFX"
script = ExtResource("8_ae5x7")

[connection signal="timeout" from="Sprites/ArmOrigin/Arm/Timer" to="Sprites/ArmOrigin/Arm/Shooter" method="shoot"]
[connection signal="changed" from="HealthComponent" to="." method="TakeDamage"]
[connection signal="initialize" from="HealthComponent" to="." method="_initializeHealthBar"]
